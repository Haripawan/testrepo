<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draggable Objects with Curved Lines</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            position: relative;
            overflow: hidden;
        }
        .container {
            width: 80%;
            height: 80%;
            border: 2px solid black;
            position: relative;
        }
        .object {
            width: 150px;
            height: 200px;
            background-color: lightblue;
            position: absolute;
            cursor: grab;
        }
        .object:active {
            cursor: grabbing;
        }
        .field {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid gray;
        }
        #obj1 {
            left: 10%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        #obj2 {
            right: 10%;
            top: 50%;
            transform: translate(50%, -50%);
        }
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows click events to pass through the SVG */
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="obj1" class="object">
            <div class="field" id="field1-1">Field 1-1</div>
            <div class="field" id="field1-2">Field 1-2</div>
            <div class="field" id="field1-3">Field 1-3</div>
        </div>
        <div id="obj2" class="object">
            <div class="field" id="field2-1">Field 2-1</div>
            <div class="field" id="field2-2">Field 2-2</div>
            <div class="field" id="field2-3">Field 2-3</div>
        </div>
        <svg>
            <path id="curve1" stroke="black" stroke-width="2" fill="none"/>
            <path id="curve2" stroke="black" stroke-width="2" fill="none"/>
            <path id="curve3" stroke="black" stroke-width="2" fill="none"/>
        </svg>
    </div>
    <script>
        function updateCurves() {
            const fields1 = [
                document.getElementById('field1-1').getBoundingClientRect(),
                document.getElementById('field1-2').getBoundingClientRect(),
                document.getElementById('field1-3').getBoundingClientRect()
            ];
            const fields2 = [
                document.getElementById('field2-1').getBoundingClientRect(),
                document.getElementById('field2-2').getBoundingClientRect(),
                document.getElementById('field2-3').getBoundingClientRect()
            ];

            fields1.forEach((field1, index) => {
                const field2 = fields2[index];
                const x1 = field1.left + field1.width / 2;
                const y1 = field1.top + field1.height / 2;
                const x2 = field2.left + field2.width / 2;
                const y2 = field2.top + field2.height / 2;

                const path = `M${x1},${y1} C${(x1 + x2) / 2},${y1 - 50} ${(x1 + x2) / 2},${y2 + 50} ${x2},${y2}`;
                
                document.getElementById(`curve${index + 1}`).setAttribute('d', path);
            });
        }

        function makeDraggable(element, container) {
            let offsetX, offsetY;

            element.addEventListener('mousedown', (e) => {
                offsetX = e.clientX - element.getBoundingClientRect().left;
                offsetY = e.clientY - element.getBoundingClientRect().top;
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });

            function onMouseMove(e) {
                const containerRect = container.getBoundingClientRect();
                const elementRect = element.getBoundingClientRect();
                let newX = e.clientX - offsetX;
                let newY = e.clientY - offsetY;

                // Boundaries
                newX = Math.max(containerRect.left, Math.min(newX, containerRect.right - elementRect.width));
                newY = Math.max(containerRect.top, Math.min(newY, containerRect.bottom - elementRect.height));

                element.style.left = `${newX}px`;
                element.style.top = `${newY}px`;
                updateCurves();
            }

            function onMouseUp() {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }
        }

        window.addEventListener('resize', updateCurves);
        window.addEventListener('load', () => {
            updateCurves();
            const container = document.querySelector('.container');
            makeDraggable(document.getElementById('obj1'), container);
            makeDraggable(document.getElementById('obj2'), container);
        });
    </script>
</body>
</html>